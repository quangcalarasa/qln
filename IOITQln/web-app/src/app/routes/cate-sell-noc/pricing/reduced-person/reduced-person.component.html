<div nz-row [nzGutter]="24">
    <div nz-col [nzSpan]="24">
        <div nz-span>
            <a nz-button nzType="link" (click)="addRow()">
                <span nz-icon nzType="plus-circle"></span>
                Thêm người được tinh giảm
            </a>
        </div>
    </div>
</div>
<div nz-row [nzGutter]="24">
    <div nz-col [nzSpan]="24">
        <div class="card-body">
            <st #tableItemRef [data]="data" (change)="tableItemRefChange($event)" [columns]="columnsItem"
                [size]="'small'" [widthMode]="{ type: 'strict' }" [page]="{ front: false }">
                <ng-template st-row="nameHeader" type="title"><span
                        class="danger-star danger-star-unleft">*</span>&nbsp;&nbsp;&nbsp;Tên người được
                    tinh giảm
                </ng-template>
                <ng-template st-row="yearHeader" type="title"><span
                        class="danger-star danger-star-unleft">*</span>&nbsp;&nbsp;&nbsp;Thời gian công tác
                    dân sự (năm)
                </ng-template>
                <ng-template st-row="salaryHeader" type="title"><span
                        class="danger-star danger-star-unleft">*</span>&nbsp;&nbsp;&nbsp;Mức lương cơ bản
                    (năm)
                </ng-template>
                <ng-template st-row="coefficientHeader" type="title"><span
                        class="danger-star danger-star-unleft">*</span>&nbsp;&nbsp;&nbsp;Hệ số được
                    giảm
                </ng-template>
                <ng-template st-row="valueHeader" type="title"><span
                        class="danger-star danger-star-unleft">*</span>&nbsp;&nbsp;&nbsp;Tiền mua nhà được
                    giảm (đồng)
                </ng-template>

                <ng-template st-row="nameTpl" let-item let-index="index">
                    <nz-select nzAllowClear [nzShowSearch]="true" class="width-100"
                        [ngClass]="item.submit && !item.CustomerId ? 'danger-st-row' : ''" [ngModel]="item.CustomerId"
                        (ngModelChange)="tableItemRef.setRow(index, { CustomerId: $event })"
                        [ngModelOptions]="{ standalone: true }" [disabled]="!item.edit">
                        <nz-option *ngFor="let i of customer_data; let idx = index" [nzLabel]="i.FullName"
                            [nzValue]="i.Id">
                        </nz-option>
                    </nz-select>
                </ng-template>
                <ng-template st-row="yearTpl" let-item let-index="index">
                    <input *ngIf="item.edit" type="text" currencyMask [options]="{ precision: 1 }" nz-input
                        [ngModel]="item.Year" [ngClass]="item.submit && !item.Year ? 'danger-st-row' : ''"
                        (ngModelChange)="tableItemRef.setRow(index, { Year: $event })"
                        [ngModelOptions]="{ standalone: true }" />
                    <ng-container *ngIf="!item.edit">{{ item.Year | number:'0.0-2':'de-DE' }}</ng-container>
                </ng-template>
                <ng-template st-row="salaryTpl" let-item let-index="index">
                    <input type="text" *ngIf="item.edit" nz-input currencyMask [ngModel]="item.Salary"
                        [ngClass]="item.submit && !item.Salary ? 'danger-st-row' : ''"
                        (ngModelChange)="tableItemRef.setRow(index, { Salary: $event })"
                        [ngModelOptions]="{ standalone: true }" />
                    <ng-container *ngIf="!item.edit">{{ item.Salary | number:'0.0-2':'de-DE' }}</ng-container>
                </ng-template>
                <ng-template st-row="coefficientTpl" let-item let-index="index">
                    <nz-select nzAllowClear [nzShowSearch]="true" class="width-100"
                        [ngClass]="item.submit && !item.DeductionCoefficient ? 'danger-st-row' : ''"
                        [ngModel]="item.DeductionCoefficient"
                        (ngModelChange)="tableItemRef.setRow(index, { DeductionCoefficient: $event })"
                        [ngModelOptions]="{ standalone: true }" [disabled]="!item.edit">
                        <nz-option *ngFor="let i of deduction_coefficient_data; let idx = index" [nzLabel]="i.Value"
                            [nzValue]="i.Value">
                        </nz-option>
                    </nz-select>
                </ng-template>
                <ng-template st-row="valueTpl" let-item let-index="index">
                    <ng-container>{{ item.Value | number:'0.0-2':'de-DE' }}</ng-container>
                </ng-template>
            </st>
        </div>
    </div>
</div>