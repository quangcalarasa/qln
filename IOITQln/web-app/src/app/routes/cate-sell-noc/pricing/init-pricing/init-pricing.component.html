<div>
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
        <!-- <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="12">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="DecreeType1Id" nzRequired>Nghị định áp dụng cho biên
                        bản</nz-form-label>
                    <nz-form-control [nzSpan]="24" nzHasFeedback nzErrorTip="Chưa chọn Nghị định áp dụng cho biên bản!">
                        <nz-select nzAllowClear formControlName="DecreeType1Id" name="DecreeType1Id" id="DecreeType1Id"
                            nzPlaceHolder="" [nzShowSearch]="true" (ngModelChange)="getBlockData()">
                            <nz-option *ngFor="let i of decree_type1_data | keyvalue; let idx = index"
                                [nzLabel]="i.value" [nzValue]="i.key">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="12">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="TermApply" nzRequired>Áp dụng theo điều</nz-form-label>
                    <nz-form-control [nzSpan]="24" nzHasFeedback nzErrorTip="Chưa chọn Loại biên bản áp dụng!">
                        <nz-select nzAllowClear formControlName="TermApply" name="TermApply" id="TermApply"
                            nzPlaceHolder="" [nzShowSearch]="true">
                            <nz-option *ngFor="let i of termapply_data | keyvalue; let idx = index" [nzLabel]="i.value"
                                [nzValue]="i.key">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div> -->
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="12" nzOffset="6">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" >Tìm theo Mã định danh</nz-form-label>
                    <nz-form-control [nzSpan]="24" >
                        <input nz-input [(ngModel)]="code" [ngModelOptions]="{standalone: true}" id="code" name="code" (keyup.enter)="SearchByCode()" />
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="12">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="TypeReportApply" nzRequired>Loại biên bản áp
                        dụng</nz-form-label>
                    <nz-form-control [nzSpan]="24" nzHasFeedback nzErrorTip="Chưa chọn Loại biên bản áp dụng!">
                        <nz-select nzAllowClear formControlName="TypeReportApply" name="TypeReportApply"
                            id="TypeReportApply" nzPlaceHolder="" [nzShowSearch]="true"
                            (ngModelChange)="getBlockData(true)">
                            <nz-option *ngFor="let i of typeReportApply_data | keyvalue; let idx = index"
                                [nzLabel]="i.value" [nzValue]="i.key">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="12">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="TypeBlockId" nzRequired>Loại nhà</nz-form-label>
                    <nz-form-control [nzSpan]="24" nzHasFeedback nzErrorTip="Chưa chọn Loại nhà!">
                        <nz-select nzAllowClear formControlName="TypeBlockId" name="TypeBlockId" id="TypeBlockId"
                            nzPlaceHolder="" [nzShowSearch]="true" (ngModelChange)="getBlockData(false)">
                            <nz-option
                                *ngFor="let i of typehouse_data | filterTypeBlockByTypeReportApply: validateForm.value.TypeReportApply; let idx = index"
                                [nzLabel]="i.Name" [nzValue]="i.Id">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="12">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="BlockId" nzRequired>Căn nhà số</nz-form-label>
                    <nz-form-control [nzSpan]="24" nzHasFeedback nzErrorTip="Chưa chọn thông tin Căn nhà!">
                        <nz-select nzAllowClear formControlName="BlockId" name="BlockId" id="BlockId" nzPlaceHolder=""
                            [nzShowSearch]="true" (ngModelChange)="getApartmentData()" [nzLoading]="loadingDataBlock">
                            <nz-option *ngFor="let i of block_data; let idx = index" [nzLabel]="i.Name"
                                [nzValue]="i.Id">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="12"
                *ngIf="validateForm.value.TypeReportApply != TypeReportApplyEnum.NHA_RIENG_LE && ((validateForm.value.TypeReportApply == TypeReportApplyEnum.BAN_PHAN_DIEN_TICH_LIEN_KE && block?.TypeReportApply != TypeReportApplyEnum.NHA_RIENG_LE) || validateForm.value.TypeReportApply != TypeReportApplyEnum.BAN_PHAN_DIEN_TICH_LIEN_KE)">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="ApartmentId" nzRequired>Địa chỉ căn hộ</nz-form-label>
                    <nz-form-control [nzSpan]="24" nzHasFeedback nzErrorTip="Chưa chọn thông tin Địa chỉ căn hộ!">
                        <nz-select nzAllowClear formControlName="ApartmentId" name="ApartmentId" id="ApartmentId"
                            nzPlaceHolder="" [nzShowSearch]="true" (ngModelChange)="getPricingReplaceds()" [nzCustomTemplate]="defaultTemplate">
                            <nz-option nzCustomContent *ngFor="let i of apartment_data; let idx = index" [nzLabel]="i.Address"
                                [nzValue]="i.Id">
                                <span>{{ i.Address }}({{ i.Code }})</span>
                            </nz-option>
                        </nz-select>
                        <ng-template #defaultTemplate let-selected>
                            <span>{{ getInfoApartment(selected.nzValue) }}</span>
                          </ng-template>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="24">
                <nz-form-item>
                    <nz-form-label [nzSpan]="24" nzFor="pricingReplaceds">Biên bản này thay thế biên bản
                        ngày</nz-form-label>
                    <nz-form-control [nzSpan]="24">
                        <nz-select nzMode="multiple" nzAllowClear formControlName="pricingReplaceds"
                            name="pricingReplaceds" id="pricingReplaceds" nzPlaceHolder="" [nzShowSearch]="true">
                            <nz-option *ngFor="let i of pricing_data; let idx = index"
                                [nzLabel]="i.DateCreate | date: 'dd/MM/yyyy'" [nzValue]="i">
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
    </form>
</div>
<div *nzModalFooter>
    <button nz-button nzType="default" (click)="close()">Hủy</button>
    <button nz-button nzType="primary" [disabled]="!validateForm.valid || loading" (click)="submitForm()">Lập biên
        bản</button>
</div>