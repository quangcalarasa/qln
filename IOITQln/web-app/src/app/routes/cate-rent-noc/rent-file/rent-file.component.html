<div class="card-custom">
  <div class="card-header">
    <ng-container [ngTemplateOutlet]="nzExtra"></ng-container>
  </div>

  <div class="card-body">
    <st #tableRef [data]="data" (change)="tableRefChange($event)" [columns]="columns" [size]="'small'"
      [loading]="loading" [ps]="paging.page_size" [total]="paging.item_count"
      [widthMode]="{ type: 'strict', strictBehavior: 'truncate' }" [page]="{ front: false }">
      <ng-template st-row="useAreaValueHeader" type="title">
        <div class="st-title-render-right">
          <span>Tổng diện tích sử dụng(m2)</span>
        </div>
      </ng-template>
      <ng-template st-row="ucodeHeader" type="title">
        <div >
          <span>Mã đinh danh</span>
        </div>
      </ng-template>

      <ng-template st-row="typeblock-column" let-item let-index="index">
        <span>{{ genTypeBlock(item.TypeBlockId) }}</span>
      </ng-template>

      <ng-template st-row="uavClmn" let-item let-index="index"> <span>{{ item.UseAreaValueCN | number:'0.0-2':'de-DE'
          }}</span> 
      </ng-template>

      <ng-template st-row="code" let-item let-index="index" > 
        <span *ngIf="item.CodeCN != null">{{ item.CodeCN }}</span> 
        <span *ngIf="item.CodeCH != null">{{ item.CodeCH }}</span> 
      </ng-template>

      <ng-template st-row="fileStatus-column" let-item let-index="index">
        <span>{{ findContractStatus(item.FileStatus) }}</span>
      </ng-template>
      <ng-template st-row="function-column" let-item let-index="index">
        <div style="text-align: center;">
          <div style="float: left;">
            <span nz-icon nzType="table" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Bảng chiết tính" nz-tooltip></span>
            <nz-divider nzType="vertical"></nz-divider>
            <span nz-icon nzType="copy" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Bảng chiết tính User" nz-tooltip></span>
            <nz-divider nzType="vertical"></nz-divider>
            <span nz-icon nzType="credit-card" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Công nợ" nz-tooltip></span>
            <nz-divider nzType="vertical"></nz-divider>
            <span nz-icon nzType="history" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Lịch sử cập nhật" nz-tooltip></span>
          </div>
          <div style="float: left;">
            <span nz-icon nzType="eye" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Xem" nz-tooltip></span>
            <nz-divider nzType="vertical"></nz-divider>
            <span nz-icon nzType="edit" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Sửa" nz-tooltip></span>
            <nz-divider nzType="vertical"></nz-divider>
            <span nz-icon nzType="delete" nzTheme="outline" style="color: #096dd9; cursor: pointer;" nzTooltipTitle="Xóa" nz-tooltip></span>
          </div>
        </div>
      </ng-template>
    </st>
  </div>
</div>

<ng-template #nzExtra>
  <div nz-row>
    <!-- <div nz-col [nzSm]="24" [nzMd]="6">
      <h3 class="title-table">
        <i nz-icon nzType="arrow-left" nzTheme="outline" (click)="onBack()"></i>
        Danh sách hồ sơ cho thuê
      </h3>
    </div> -->

    <div nz-col [nzSm]="24" [nzMd]="24" style="text-align: right">
      <form class="hidden-mobile table-form" nz-form [nzLayout]="'inline'">
        <nz-form-item>
          <nz-form-control>
            <nz-input-group [nzSuffix]="inputClearTpl">
              <input nz-input [maxlength]="30" [width]="160" [(ngModel)]="query.txtSearch" name="no"
                placeholder="Nhập từ khoá" id="no" />
            </nz-input-group>
            <ng-template #inputClearTpl>
              <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="query.txtSearch"
                (click)="[(query.txtSearch = undefined)]"></i>
            </ng-template>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <nz-select nzAllowClear [nzDropdownMatchSelectWidth]="false" [(ngModel)]="query.type" name="type" id="type"
              [nzPlaceHolder]="'Trạng thái hồ sơ'" [nzShowSearch]="true">
              <nz-option *ngFor="let i of contractStatus" [nzLabel]="i.Name" [nzValue]="i.Id">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <button nz-button type="submit" (click)="searchData()">
              <i nz-icon nzType="search" nzTheme="outline"></i>
            </button>
          </nz-form-control>
        </nz-form-item>
      </form>

      <!-- <nz-select (ngModelChange)="paingSize($event)" [(ngModel)]="paging.page_size" style="width: 60px; margin: 10px">
        <nz-option nzValue="5" nzLabel="5"></nz-option>
        <nz-option nzValue="10" nzLabel="10"></nz-option>
        <nz-option nzValue="20" nzLabel="20"></nz-option>
        <nz-option nzValue="50" nzLabel="50"></nz-option>
      </nz-select> -->

      <button nz-button nzType="text" nzTooltipTitle="Làm mới" nz-tooltip (click)="reset()">
        <i nz-icon nzType="reload" nzTheme="outline"></i>
      </button>

      <button nz-button *ngIf="role.Create" nzType="primary" nz-button (click)="addOrUpdate()">
        <i nz-icon nzType="plus" nzTheme="outline"></i>
        Thêm mới
      </button>

      <button *ngIf="roleImportReceipt.ViewOrActionSpecial" nz-button nzType="primary" nz-button (click)="import()">
        <i nz-icon nzType="import" nzTheme="outline"></i>
        Import phiếu thu
      </button>

      <button *ngIf="roleExportReceipt.ViewOrActionSpecial" nz-button nzType="primary" nz-button (click)="exportPromissory()">
        <i nz-icon nzType="export" nzTheme="outline"></i>
        Export phiếu thu
      </button>

      <button *ngIf="roleImportRentContract.ViewOrActionSpecial" nz-button nzType="primary" nz-button (click)="importContract()">
        <i nz-icon nzType="import" nzTheme="outline"></i>
        Import hợp đồng
      </button>
    </div>
  </div>
</ng-template>