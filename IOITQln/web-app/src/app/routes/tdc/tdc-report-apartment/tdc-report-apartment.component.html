<div class="card-custom">
    <div class="card-header">
        <ng-container [ngTemplateOutlet]="nzExtra"></ng-container>
    </div>

    <div class="card-body">
        <st #tableRef [data]="data" (change)="tableRefChange($event)" [columns]="columns" [size]="'small'"
            [loading]="loading" [ps]="paging.page_size" [total]="paging.item_count"
            [widthMode]="{ type: 'strict',strictBehavior:'truncate' }" [page]="{front:false}">
            <ng-template st-row="typedecision-column" let-item let-index="index">
                <span>{{ genTypeDecision(item.TypeLegalId) }}</span>
            </ng-template>
            
        </st>
    </div>
</div>

<ng-template #nzExtra>
    <div nz-row>
        <div nz-col [nzSm]="24" [nzMd]="6">
            <h3 class="title-table">
                <i nz-icon nzType="arrow-left" nzTheme="outline" (click)="onBack()"></i>
                Danh sách Căn hộ và báo cáo
            </h3>
        </div>

        <div nz-col [nzSm]="24" [nzMd]="24" style="text-align: right;">
            <form class="hidden-mobile table-form" nz-form [nzLayout]="'inline'">
                <nz-form-item>
                    <nz-form-control>
                        <nz-input-group [nzSuffix]="inputClearTpl">
                            <input nz-input [maxlength]="30" [width]="160" [(ngModel)]="query.txtSearch" name="no"
                                placeholder="Nhập từ khoá" id="no" />
                        </nz-input-group>
                        <ng-template #inputClearTpl>
                            <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle"
                                *ngIf="query.txtSearch" (click)="[query.txtSearch = undefined]"></i>
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>
                
                <nz-form-item>
                    <nz-form-control>
                      <nz-select
                        nzAllowClear
                        [nzDropdownMatchSelectWidth]="false"
                        [(ngModel)]="query.type"
                        name="TypeLegalId"
                        id="TypeLegalId"
                        [nzPlaceHolder]="'Quyết định pháp lý'"
                        [nzShowSearch]="true"
                      >
                        <nz-option *ngFor="let i of typedecision_data; let idx = index" [nzLabel]="i.Name" [nzValue]="i.Id"></nz-option>
                      </nz-select>
                    </nz-form-control>
                  </nz-form-item>
                <nz-form-item>
                    <nz-form-control>
                        <button nz-button type="submit" (click)="searchData()">
                            <i nz-icon nzType="search" nzTheme="outline"></i>
                        </button>
                    </nz-form-control>
                </nz-form-item>
            </form>

            <button nz-button nzType="text" nzTooltipTitle="Làm mới" nz-tooltip (click)="reset()">
                <i nz-icon nzType="reload" nzTheme="outline"></i>
            </button>

            <button nz-button nzType="primary" nz-button (click)="csvExport()">
                <i nz-icon nzType="export" nzTheme="outline"></i>
                Export Excel
            </button>

            <button nz-button nzType="primary" nz-button (click)="csvExport2()">
                <i nz-icon nzType="export" nzTheme="outline"></i>
                Export Excel 2
            </button>

            <button nz-button nzType="primary" nz-button (click)="csvExport3()">
                <i nz-icon nzType="export" nzTheme="outline"></i>
                Export Excel 3
            </button>

            <button nz-button nzType="primary" nz-button (click)="csvExport4()">
                <i nz-icon nzType="export" nzTheme="outline"></i>
                Export Excel 4
            </button>

            <button nz-button nzType="primary" nz-button (click)="addOrUpdate()">
                <i nz-icon nzType="plus" nzTheme="outline"></i>
                Thêm mới
            </button>
        </div>
    </div>
</ng-template>

<div style="margin: 10px;">
    <button nz-button nzType="primary" (click)="getDataRP3()">
        <span nz-icon nzType="search"></span>
        Tổng hợp dữ liệu báo cáo 3
    </button>
    <button nz-button nzType="primary" (click)="downloadReport3()">
        <span nz-icon nzType="download"></span>
        Xuất báo cáo tổng hợp số 3
    </button>
</div>