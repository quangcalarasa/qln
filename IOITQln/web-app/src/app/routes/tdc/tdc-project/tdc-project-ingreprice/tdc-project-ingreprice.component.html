<div nz-row>
    <div nz-span>
        <a nz-button nzType="link" (click)="addRow()">
            <span nz-icon nzType="plus-circle"></span>
            Thêm thành phần giá bán cấu thành
        </a>
    </div>
</div>
<div nz-row [nzGutter]="24">
    <div nz-col [nzSpan]="24">
        <div class="card-body">
            <st #tableItemRef [data]="tDCProjectIngrePrices" (change)="tableItemRefChange($event)"
                [columns]="columnsItem" [size]="'small'" [loading]="loading" [widthMode]="{ type: 'strict' }"
                [page]="{ front: false }">
                <ng-template st-row="IngrePriceHeader" type="title"><span class="danger-star">*</span>&nbsp;Thành phần giá bán cấu thành
                </ng-template>
                <ng-template st-row="ValueHeader" type="title">Hệ số<span class="danger-star">*</span>
                </ng-template>
                <ng-template st-row="LocationHeader" type="title">Thứ tự hiển thị<span class="danger-star">*</span>
                </ng-template>
                <ng-template st-row="IngredientsPriceId" let-item let-index="index" nzWidth="500px">
                    <nz-select *ngIf="item.edit" nzAllowClear name="IngrePriceName" id="IngrePriceName" nzPlaceHolder=""
                        class="width-40" [ngModel]="item.IngredientsPriceId" [nzDropdownMatchSelectWidth]=false
                        (ngModelChange)="onSelect(index,$event)" [ngModelOptions]="{ standalone: true }"
                        [ngClass]="item.submit && !item.IngredientsPriceId ? 'danger-st-row' : ''">
                        <nz-option *ngFor="let i of ingre_price_data; let idx = index" [nzLabel]="i.Name"
                            [nzValue]="i.Id" [nzDisabled]="i.disabled">
                        </nz-option>
                    </nz-select>
                    <ng-container *ngIf="!item.edit">{{ item.IngrePriceName }}</ng-container>
                </ng-template>
                <ng-template st-row="Value" let-item let-index="index">
                    <input
                        nz-input
                        *ngIf="item.edit" [ngModel]="item.Value"
                        [ngClass]="item.submit && !item.Value ? 'danger-st-row' : ''"
                        (ngModelChange)="tableItemRef.setRow(index, { Value: $event })"
                        [ngModelOptions]="{ standalone: true }"/>
                    <ng-container *ngIf="!item.edit">{{ item.Value | number:'0.0-2':'de-DE'}}</ng-container>
                </ng-template>
                <ng-template st-row="Location" let-item let-index="index">
                    <input
                        nz-input 
                        *ngIf="item.edit" [ngModel]="item.Location"
                        [ngClass]="item.submit && !item.Location ? 'danger-st-row' : ''"
                        (ngModelChange)="tableItemRef.setRow(index, { Location: $event })"
                        [ngModelOptions]="{ standalone: true }"/>
                    <ng-container *ngIf="!item.edit">{{ item.Location }}</ng-container>
                </ng-template>
            </st>
        </div>
    </div>
</div>